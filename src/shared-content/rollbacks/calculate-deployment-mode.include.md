Calculate Deployment Mode is a [community step template](https://library.octopus.com/step-templates/d166457a-1421-4731-b143-dd6766fb95d5/actiontemplate-calculate-deployment-mode) created by Octopus Deploy.  It compares the release number being deployed with the current release number for the environment.  When the release number is greater than the current release number, it is a deployment.  When it is less, then it is a rollback.  The step templates sets a number of [output variables](/docs/projects/variables/output-variables), including ones you can use in variable run conditions.