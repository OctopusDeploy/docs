---
import { Accelerator } from 'astro-accelerator-utils';
import type { Frontmatter } from 'astro-accelerator-utils/types/Frontmatter';
import { SITE } from '@config';
import { Lang } from '@util/Languages';

const accelerator = new Accelerator(SITE);
const stats = new accelerator.statistics('components/ArticleHeader.astro');
stats.start();

// Properties
type Props = {
  icon?: string | null;
  lang: string;
  subtitle?: string | null;
  title: string;
};
const { icon, lang, subtitle, title } = Astro.props satisfies Props;

// Language
const _ = Lang(lang);

// Logic
stats.stop();
---

<header class="header">
  <div class="header__content">
    {
      icon && (
        <div class="header__icon-wrapper">
          {icon.startsWith('fa-') ? (
            // For FontAwesome icons
            <i
              class={`${icon} header__icon`}
              aria-hidden="false"
              aria-label="Header icon"
            />
          ) : (
            // For image icons
            <img src={icon} alt="Header icon" class="header__icon" />
          )}
        </div>
      )
    }
    {
      subtitle ? (
        <div class="header__text">
          <h1 class="header__title">{title}</h1>
          <p class="header__subtitle">{subtitle}</p>
        </div>
      ) : (
        <h1 class="header__title">{title}</h1>
      )
    }
  </div>
  <div class="page-tools">
    <button class="page-tool page-tool-copy" title="Copy page as markdown" type="button">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2" />
        <rect x="9" y="3" width="6" height="4" rx="2" />
      </svg>
      Copy page
    </button>
    <button class="page-tool page-tool-markdown" title="View as markdown in new tab" type="button">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <rect x="3" y="5" width="18" height="14" rx="2" />
        <path d="M7 15v-6l2 2l2 -2v6" />
        <path d="M14 13l2 2l2 -2m-2 2v-6" />
      </svg>
      View as markdown
    </button>
  </div>
</header>
