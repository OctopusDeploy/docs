---
layout: src/layouts/Default.astro
pubDate: 2023-01-01
modDate: 2023-10-04
title: Upgrading Octopus
description: Everything you need to know about upgrading Octopus to a newer version.
navOrder: 40
hideInThisSection: true
---
import OctopusReleases from 'src/shared-content/installation/octopus-releases.include.md';

This guide is for customers managing their self-hosted installation of Octopus. If you are using Octopus Cloud, we take care of everything for you, which means you don't need to worry about upgrades, and you have early access to all the latest features.

## Upgrade information

We've designed Octopus Deploy to be as easy to upgrade as possible.  

- You don't need to incrementally upgrade.  You can upgrade from 2020.2 all the way to the latest version.
- All database changes are done in a transaction.
- Octopus won't upgrade if it means you'll go out of compliance with your license.
- Manually upgrading can take 30 minutes to 60 minutes (depending on the size of the instance).
- Automating upgrades can reduce that to be between 5 minutes to 25 minutes (depending on the size of the instance).

### Upgrade frequency

We release new Major.Minor versions of Octopus Deploy to our self-hosted customers once a quarter.  Because of that, we recommend upgrading Octopus Deploy at least once a quarter.  Ideally, once a month. 

Waiting a year or more between upgrades **will increase risk.**  While Octopus Deploy can be upgraded from 2020.2 to the latest version, there are a lot of changes made each year to octopus Deploy.  The more changes, the greater the chance something can go wrong.  Imagine if you could only deploy the applications you develop once a year.  

### Upgrade version

We recommend installing the latest version available for download.  

Even if you install the first version available for a Major.Minor version you'll notice the build number is quite high.  For example, the first version available for `2025.4` was `2025.4.10186`. That is because every version we release has been running on Octopus Cloud for at least a quarter.  

## Upgrade workflow

Every upgrade will follow the same workflow.

1. Put the Octopus Deploy instance into [Maintenance Mode](/docs/administration/managing-infrastructure/maintenance-mode).
2. Backup the database.
3. [Download](https://octopus.com/downloads) and install the desired version.
4. Perform a couple of test deployments.
5. Take the instance out of [Maintenance Mode](/docs/administration/managing-infrastructure/maintenance-mode).

How you install the latest version is dependent on the host.

1. For Windows hosts, we provide an MSI.  Follow the wizard to upgrade your instance.
2. When running Octopus in a container, it's a matter of changing the version in the manifest file, Helm chart, etc.  The container entry point will run a script to upgrade the database.

### Post-upgrade steps

In our experience, the majority of the time spent on an upgrade will be spent on (optional) post-upgrade steps.  That is because these steps require changing deployment targets and workers.  For anyone with 1000+ deployment targets, this can be a daunting task.

1. Update the [Octopus Tentacle](/docs/infrastructure/deployment-targets/linux) agent on all Linux or Windows deployment targets or workers.
1. Update the [Kubernetes agent](/docs/kubernetes/targets/kubernetes-agent) and Gateways on any Kubernetes clusters.
1. Updating [Calamari](/docs/octopus-rest-api/calamari) on all deployment targets and workers.

Those post-upgrade steps are optional and can be done later.

1. As detailed in our [compatibility](docs/support/compatibility) page, Octopus Deploy is backward compatible with tentacles and agents for multiple versions.  
1. Calamari is automatically updated on the first deployment to a deployment target and worker.

For security and performance reasons, we recommend staying up to date on the latest Tentacle, Kubernetes Agent, and Kubernetes Gateway.  But you can upgrade them when it is appropriate.  Target development and test deployment targets and workers first, then move on pre-production, and then production.  

### Upgrades and high availability

High availability (HA) increases the upgrade workflow complexity.  That is because an HA cluster cannot run multiple versions of Octopus Deploy.  The upgrade workflow for an HA cluster will be:

1. Put the Octopus Deploy instance into [Maintenance Mode](/docs/administration/managing-infrastructure/maintenance-mode).
2. Backup the database.
3. Shut off all the HA nodes (or reduce the number of replicas to 1).
4. [Download](https://octopus.com/downloads) the desired version.
5. Upgrade one node and have it upgrade the database.
6. Upgrade the remaining nodes (or increase the number of replicas to the previous number).
7. Perform a couple of test deployments.
8. Take the instance out of [Maintenance Mode](/docs/administration/managing-infrastructure/maintenance-mode).

:::div{.warning}
As of **2023.2.9755**, a database upgrade will abort if Octopus detects there are nodes still running. Ensure all nodes are properly shutdown and try again.
:::

:::div{.warning}
A small outage window will occur when upgrading a highly available Octopus Deploy instance.  The outage window will happen between when you shut down all the nodes and upgrade the first node.  The window duration depends on the number of database changes, the size of the database, and compute resources.  It is highly recommended to [automate your upgrade process](/docs/administration/upgrading/guide/automate-upgrades) to reduce that outage window.
:::

### Upgrades and the Service Watchdog

If you are using the [Service Watchdog](/docs/administration/managing-infrastructure/service-watchdog), you will need to cancel it before you start your upgrade and recreate it after the upgrade is finished. Please see [documentation on canceling the watchdog](/docs/administration/managing-infrastructure/service-watchdog/#ServiceWatchdog-CancelingTheWatchdog).

### Components

Octopus Deploy is split across multiple components to make upgrading easy and low risk.

- **Install Location**: If you are running on Windows, the default install location for Octopus on Windows is `C:\Program Files\Octopus Deploy\Octopus`.  The install location contains the binaries for Octopus Deploy and is updated by the MSI.  All that is handled automatically in the containerized version of Octopus.
- **SQL Server Database**: Since `Octopus Deploy 3.x`, the back-end database has been SQL Server.  Each update can contain 0 to N database scripts embedded in a .dll in the install location.  The **Octopus Manager** or a new image version invokes those database scripts automatically.
- **Home Folder**: The home folder stores configuration, logs, and other items unique to your instance.  The home folder is separate from the install location to make it easier to upgrade, downgrade, uninstall/reinstall without affecting your instance.  For Windows installs of the home folder is `C:\Octopus`.  When running Octopus in a container, you must provide a volume mount for the home folder..
- **Instance Information**: The Octopus Deploy Manager allows you to configure 1 to N instances per Windows Server.  The **Octopus Manager** stores a list of all the instances in the `C:\ProgramData\Octopus\OctopusServer\Instances` folder.   
- **Server Folders**: Logs, artifacts, packages, and event exports are too big for Octopus Deploy to store in a SQL Server database.  These are sub directories stored in **Home Folder**.  
- **Tentacles**: Octopus Deploy connects to deployment targets via the Tentacle service.  Each version of Octopus Deploy includes a specific Tentacle version.  Tentacle upgrades do not occur until *after* the Octopus Deploy server is upgraded.  Tentacle upgrades are optional; any Tentacle greater than 4.x will work [with any modern version of Octopus Deploy](/docs/support/compatibility).  We recommend you upgrade them to get the latest bug fixes and security patches when convenient.  
- **Calamari**: The Tentacles facilitate communication between Octopus Deploy and the deployment targets.  Calamari is the software that does the actual deployments.  Calamari and Octopus Deploy are coupled together.  Calamari is upgraded automatically during the first deployment to a target.

## How we version Octopus Deploy

We use our version numbering scheme to help you understand the type of changes we have introduced between two versions of Octopus Deploy:

- **Major version change**: Beware of major breaking changes and new features.
  - Example **Octopus 2019.x** to **Octopus 2020.x**.
  - Breaking changes means downgrading will be difficult.  Check our release notes for more details.
    - In **Octopus 2019.1** Spaces was introduced, changing the folder structure and user management.
    - In **Octopus 2020.1** We started requiring SQL Server 2016 or higher
- **Minor version change**: New features, the potential for minor breaking changes, and database changes.
  - Example **Octopus 2020.1.x** to **Octopus 2020.2.x**.
  - Upgrading should be easy, but rolling back will require restoring your database.  Check our release notes for more details.
    - We will usually make changes to the database schema.
    - We will usually make changes to the API, being backward compatible wherever possible.  
- **Build version change**: Small bug fixes and computational logic changes.
  - Example **Octopus 2021.1.7500** to **Octopus 2021.1.7595** (upgrade or downgrade).
  - Patches should be **safe to update, safe to roll back*.
  - We will rarely make database changes, only if we absolutely must to patch a critical bug. If we do, the change will be safe for any other patches of the same release.
  - We may decide to make API changes, but any changes will be backward compatible.

## Legacy Upgrades

If you are upgrading from a version older than 2020.2, please follow one of these guides.

- [Upgrading from Octopus 4.x or 2018.x to latest version](/docs/administration/upgrading/guide/upgrading-from-octopus-4.x-2018.x-to-modern)
- [Upgrading from Octopus 3.x to latest version](/docs/administration/upgrading/guide/upgrading-from-octopus-3.x-to-modern)
- [Upgrade from 2.6.5 to 2018.10.x](/docs/administration/upgrading/legacy/upgrading-from-octopus-2.6.5-2018.10lts)
- [Upgrade from 2.x to 2.6.5](/docs/administration/upgrading/legacy/upgrading-from-octopus-2.x-2.6.5)
- [Upgrade from 1.6 to 2.6.5](/docs/administration/upgrading/legacy/upgrading-from-octopus-1.6-2.6.5)

## Mitigating risk

The best way to mitigate risk is to automate the upgrade and/or create a test instance.  Automation ensures all steps, including backups, are followed for every upgrade.  A test instance allows you to test out upgrades and new features without affecting your main instance. We also recommend performing a System Integrity Check on your live instance before attempting to upgrade. If the integrity check fails, please contact [support](https://octopus.com/support) with the [raw output of the task](/docs/support/get-the-raw-output-from-a-task), and we can get that fixed for you.

- [Perform a System Integrity Check](/docs/administration/managing-infrastructure/diagnostics)
- [Automating upgrades](/docs/administration/upgrading/guide/automate-upgrades)
- [Create a test instance](/docs/administration/upgrading/guide/creating-test-instance)
