---
layout: src/layouts/Default.astro
pubDate: 2023-01-01
modDate: 2023-01-01
title: Bulk add a project to a list of tenants
description: An example script that will add a project to a lot of tenants at once.
---
import BulkAddTenantsToProjects from 'src/shared-content/scripts/bulk-add-tenants-to-projects.include.md';

This script demonstrates how to programmatically assign a group of [tenants](/docs/tenants) to a project in Octopus.

## Usage

Provide values for:

- Octopus URL
- Octopus API Key
- Name of the space to use
- Name of the project to add
- A list of Environments to tie the project to
- The tenant tag you wish to filter on
- What if is true or false
- Max number of tenants to change

:::div{.hint}
**Note:** 
In order for this script to execute correctly, please note the following:
- The projects provided must have the Multi-tenanted deployment setting enabled.
- The environments provided must exist.
- The optional tenant tags provided must exist.
- The script will make sure the environments specified are assigned to that tenant.  Even if the tenant / project relationship already exists.
:::

This script has guardrails in place to ensure you don't make too many changes.  

- The first is what if.  Set that to `$true` and it will skip the save step.  It will print out all the changes it would've made to the tenant.
- The second is the max number of tenants to change.  The search will still return the full list of tenants, however, it will only change, at most the number of tenants specified.  For example, if you specified 10 tenants, and it found 25 to change, it would only change those 10.  The next run will change the next 10, and then finally the last 5.


## Script

<BulkAddTenantsToProjects />