---
layout: src/layouts/Default.astro
pubDate: 2023-01-01
modDate: 2023-01-01
title: Swap AD group with LDAP group
description: An example script that swaps any active directory external group for a matching LDAP external group in each Octopus team.
---
import SwitchADDomainGroupToLdapGroupScripts from 'src/shared-content/scripts/switch-ad-domain-group-to-ldap-group-scripts.include.md';

This script demonstrates how to programmatically swap any Active Directory external group for a matching LDAP external group in each Octopus team. This can be useful when you are migrating from the Active Directory authentication provider to the LDAP provider.

We also have a script that will [swap Active Directory login records with matching LDAP ones](/docs/octopus-rest-api/examples/users-and-teams/swap-users-ad-domain-to-ldap) for Octopus users.

:::div{.hint}
**Note:**
Please note there are some things to consider before using this script:

- Both the [Active Directory](/docs/security/authentication/active-directory/) and [LDAP](/docs/security/authentication/ldap) providers must be enabled for this script to work as it queries both providers.
- Always ensure you test the script on a non-production server first, and have a production database backup.
:::

## Usage

Provide values for:

- Octopus URL
- Octopus API Key
- Name of the Active Directory domain to use to look up the groups to swap
- WhatIf - A boolean value to toggle whether or not to perform the actual updates to teams in Octopus.
- Remove old teams - A boolean value to toggle whether or not to remove the existing Active Directory groups from each team.

## Script

<SwitchADDomainGroupToLdapGroupScripts />