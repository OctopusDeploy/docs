---
layout: src/layouts/Default.astro
pubDate: 2015-06-03
title: 'ASPState Database'
description: >-
This uses the .Net framework aspnet_regsql tool to create an ASPState database using the credentials provided. If the username and password are both empty then it will attempt a trusted connection.
navMenu: false
# Set to true when launched
navSitemap: false
navSearch: false
# This file is auto-generated by docs/tools/MarkdownGenerator (detail.js)
---

Octopus.Script exported 2015-06-03 by bobjwalker belongs to 'ASP.NET' category.

## Parameters

When steps based on the template are included in a project's deployment process, the parameters below can be set.


<div class="param">

### Framework Directory

`FrameworkDirectory = Framework64\v4.0.30319`

Used to switch between different bitness and versions of the .Net framework

</div>
        
<div class="param">

### Sql Server

`SqlServer`

SQL Server Instance with Port

</div>
        
<div class="param">

### Sql Username (optional)

`SqlUsername`

The SQL Account which has access to create a SQL Database

</div>
        
<div class="param">

### Sql Password (optional)

`SqlPassword`

The password for the SQL Account

</div>
        

## Script body

Steps based on this template will execute the following *PowerShell* script.

```powershell
$command = "$env:windir\Microsoft.NET\$FrameworkDirectory\aspnet_regsql.exe"
$params = @('-ssadd', '-sstype', 'p', '-S', $SqlServer)
try
{    
    if ($SqlUsername -ne $null -and $SqlPassword -ne $null)
    {
        $params += @('-U', $SqlUsername, '-P', $SqlPassword)
    } else {
        $params += @('-E')
    }
    
    & $command @params
}
catch
{    
    $error[0] | format-list -force
    Exit 1
}
```

Provided under the [Apache License version 2.0](https://github.com/OctopusDeploy/Library/blob/master/LICENSE.txt).

[Report an issue](https://github.com/OctopusDeploy/Library/issues/new?assignees=&labels=&projects=&template=bug-report.yml&title=Issue%20with%20ASPState%20Database&step-template=ASPState%20Database)

<div class="get-json">

To use this template in Octopus Deploy, copy the JSON below and paste it into the **Library → Step templates → Import** dialog.

```json
{
  "Id": "c81e85e0-0b72-478e-a776-1c658fe696a1",
  "Name": "ASPState Database",
  "Description": "This uses the .Net framework aspnet_regsql tool to create an ASPState database using the credentials provided. If the username and password are both empty then it will attempt a trusted connection.",
  "Version": 6,
  "ExportedAt": "2015-06-03T16:12:08.806+00:00",
  "ActionType": "Octopus.Script",
  "Author": "bobjwalker",
  "Parameters": [
    {
      "Name": "FrameworkDirectory",
      "Label": "Framework Directory",
      "HelpText": "Used to switch between different bitness and versions of the .Net framework",
      "DefaultValue": "Framework64\\v4.0.30319",
      "DisplaySettings": {
        "Octopus.ControlType": "Select",
        "Octopus.SelectOptions": "Framework\\v2.0.50727| .NET Framework Ver 2.0/3.0/3.5 (32-bit)\nFramework64\\v2.0.50727| .NET Framework ver 2.0/3.0/3.5 (64-bit)\nFramework\\v4.0.30319| .NET Framework version 4 (32-bit)\nFramework64\\v4.0.30319| .NET Framework version 4 (64-bit)"
      }
    },
    {
      "Name": "SqlServer",
      "Label": "Sql Server",
      "HelpText": "SQL Server Instance with Port",
      "DefaultValue": null,
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      }
    },
    {
      "Name": "SqlUsername",
      "Label": "Sql Username (optional)",
      "HelpText": "The SQL Account which has access to create a SQL Database",
      "DefaultValue": null,
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      }
    },
    {
      "Name": "SqlPassword",
      "Label": "Sql Password (optional)",
      "HelpText": "The password for the SQL Account",
      "DefaultValue": null,
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      }
    }
  ],
  "Properties": {
    "Octopus.Action.Script.ScriptBody": "$command = \"$env:windir\\Microsoft.NET\\$FrameworkDirectory\\aspnet_regsql.exe\"\n$params = @('-ssadd', '-sstype', 'p', '-S', $SqlServer)\ntry\n{    \n    if ($SqlUsername -ne $null -and $SqlPassword -ne $null)\n    {\n        $params += @('-U', $SqlUsername, '-P', $SqlPassword)\n    } else {\n        $params += @('-E')\n    }\n    \n    & $command @params\n}\ncatch\n{    \n    $error[0] | format-list -force\n    Exit 1\n}",
    "Octopus.Action.Script.Syntax": "PowerShell"
  },
  "Category": "ASP.NET",
  "HistoryUrl": "https://github.com/OctopusDeploy/Library/commits/master/step-templates//opt/buildagent/work/75443764cd38076d/step-templates/aspnet-state-database.json",
  "Website": "/step-templates/c81e85e0-0b72-478e-a776-1c658fe696a1",
  "Logo": "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",
  "$Meta": {
    "Type": "ActionTemplate"
  }
}
```

[History](https://github.com/OctopusDeploy/Library/commits/master/step-templates/https://github.com/OctopusDeploy/Library/commits/master/step-templates//opt/buildagent/work/75443764cd38076d/step-templates/aspnet-state-database.json)

</div>
