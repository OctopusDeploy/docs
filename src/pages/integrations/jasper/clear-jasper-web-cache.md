---
layout: src/layouts/Default.astro
pubDate: 2015-07-09
title: 'Clear Jasper Web-Cache'
description: >-
Clears the Jasper web cache
navMenu: false
# Set to true when launched
navSitemap: false
navSearch: false
# This file is auto-generated by docs/tools/MarkdownGenerator (detail.js)
---

Octopus.Script exported 2015-07-09 by matt40k belongs to 'Jasper' category.

## Parameters

When steps based on the template are included in a project's deployment process, the parameters below can be set.


<div class="param">

### Server Name

`fqdn = server`

Enter the server name of your Jasper web server

</div>
        
<div class="param">

### Environment

`environment = dev`

Enter the environment

</div>
        
<div class="param">

### Username

`username = username`

Enter the username to authenticate.

</div>
        
<div class="param">

### Password

`password = `

Enter the password

</div>
        

## Script body

Steps based on this template will execute the following *PowerShell* script.

```powershell
# Name: ClearCache.ps1
# Author: Matt Smith
# Created Date: 28 July 2014
# Modified Date: 13 October 2014
# Version: 1.3

$servers = $OctopusParameters['fqdn'] -split ";"

foreach ($server in $servers)
{
    Write-Host 'Clearing cache in '$server
    $url = 'http://' + $server + '/' + $OctopusParameters['environment'] + '_web/report/meta'

    Function ClearCache($type)
    { 
      return Invoke-WebRequest -Uri $url/$type -Method GET -Headers @{"Authorization" = "Basic "+[System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes($OctopusParameters['username']+":"+$OctopusParameters['password'] ))}
    }
  
    # Clear cache
    $reportresult = ClearCache -type 'reportcache?CLEAR=Clear+Cache'
    $templateresult =  ClearCache -type 'templatecache?CLEAR=Clear+Cache'
    $imageresult =  ClearCache -type 'imagescache?CLEAR=Clear+Cache'

}
```

Provided under the [Apache License version 2.0](https://github.com/OctopusDeploy/Library/blob/master/LICENSE.txt).

[Report an issue](https://github.com/OctopusDeploy/Library/issues/new?assignees=&labels=&projects=&template=bug-report.yml&title=Issue%20with%20Clear%20Jasper%20Web-Cache&step-template=Clear%20Jasper%20Web-Cache)

<div class="get-json">

To use this template in Octopus Deploy, copy the JSON below and paste it into the **Library → Step templates → Import** dialog.

```json
{
  "Id": "a9fd43af-257e-49c9-9434-618568e1df52",
  "Name": "Clear Jasper Web-Cache",
  "Description": "Clears the Jasper web cache",
  "Version": 3,
  "ExportedAt": "2015-07-09T12:17:59.666+00:00",
  "ActionType": "Octopus.Script",
  "Author": "matt40k",
  "Parameters": [
    {
      "Name": "fqdn",
      "Label": "Server Name",
      "HelpText": "Enter the server name of your Jasper web server",
      "DefaultValue": "server",
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      }
    },
    {
      "Name": "environment",
      "Label": "Environment",
      "HelpText": "Enter the environment",
      "DefaultValue": "dev",
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      }
    },
    {
      "Name": "username",
      "Label": "Username",
      "HelpText": "Enter the username to authenticate.",
      "DefaultValue": "username",
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      }
    },
    {
      "Name": "password",
      "Label": "Password",
      "HelpText": "Enter the password",
      "DefaultValue": "",
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      }
    }
  ],
  "Properties": {
    "Octopus.Action.Script.ScriptBody": "# Name: ClearCache.ps1\n# Author: Matt Smith\n# Created Date: 28 July 2014\n# Modified Date: 13 October 2014\n# Version: 1.3\n\n$servers = $OctopusParameters['fqdn'] -split \";\"\n\nforeach ($server in $servers)\n{\n    Write-Host 'Clearing cache in '$server\n    $url = 'http://' + $server + '/' + $OctopusParameters['environment'] + '_web/report/meta'\n\n    Function ClearCache($type)\n    { \n      return Invoke-WebRequest -Uri $url/$type -Method GET -Headers @{\"Authorization\" = \"Basic \"+[System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes($OctopusParameters['username']+\":\"+$OctopusParameters['password'] ))}\n    }\n  \n    # Clear cache\n    $reportresult = ClearCache -type 'reportcache?CLEAR=Clear+Cache'\n    $templateresult =  ClearCache -type 'templatecache?CLEAR=Clear+Cache'\n    $imageresult =  ClearCache -type 'imagescache?CLEAR=Clear+Cache'\n\n}",
    "Octopus.Action.Script.Syntax": "PowerShell"
  },
  "Category": "Jasper",
  "HistoryUrl": "https://github.com/OctopusDeploy/Library/commits/master/step-templates//opt/buildagent/work/75443764cd38076d/step-templates/jasper-clear-cache.json",
  "Website": "/step-templates/a9fd43af-257e-49c9-9434-618568e1df52",
  "Logo": "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",
  "$Meta": {
    "Type": "ActionTemplate"
  }
}
```

[History](https://github.com/OctopusDeploy/Library/commits/master/step-templates/https://github.com/OctopusDeploy/Library/commits/master/step-templates//opt/buildagent/work/75443764cd38076d/step-templates/jasper-clear-cache.json)

</div>
