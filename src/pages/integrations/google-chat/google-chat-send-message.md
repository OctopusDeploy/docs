---
layout: src/layouts/Default.astro
pubDate: 2024-04-03
title: 'Google Chat - Send message'
description: 'Send a message to a [Google Chat](https://chat.google.com) space using a configured [chat webhook](https://developers.google.com/workspace/chat/quickstart/webhooks#python_2).

Multi-line message content and [basic formatting](https://developers.google.com/workspace/chat/format-messages) are supported.

**Note:** This script is written in python, and is required for this step to function correctly.'
# This file is auto-generated by docs/tools/MarkdownGenerator (detail.js)
---

Octopus.Script exported 2024-04-03 by harrisonmeister belongs to 'Google Chat' category.

## Parameters

When steps based on the template are included in a project's deployment process, the parameters below can be set.


<div class="param">

### Webhook URL

`GoogleChat.SendMessage.WebhookUrl = `

Provide the Google Chat [Webhook URL](https://developers.google.com/workspace/chat/quickstart/webhooks)

</div>
        
<div class="param">

### Message Content

`GoogleChat.SendMessage.MessageContent = `

Provide the message to send. Multi-line values, and [basic formatting](https://developers.google.com/workspace/chat/format-messages) are supported.

</div>
        

## Script body

Steps based on this template will execute the following *Python* script.

```Python
import subprocess
import sys

subprocess.check_call([sys.executable, '-m', 'pip', 'install', 'httplib2', '--disable-pip-version-check'])

# parameters
webhook_url = get_octopusvariable("GoogleChat.SendMessage.WebhookUrl")
message_content = get_octopusvariable("GoogleChat.SendMessage.MessageContent")

if not webhook_url:
  raise ValueError('Webhook url null or empty!')
  
if not message_content:
  raise ValueError('Message content null or empty!')
  
from json import dumps
from httplib2 import Http

app_message = {"text": message_content}
message_headers = {"Content-Type": "application/json; charset=UTF-8"}
http_obj = Http()
response = http_obj.request(
  uri=webhook_url,
  method="POST",
  headers=message_headers,
  body=dumps(app_message),
)
printverbose('Google response:')
printverbose(response)
```

Provided under the [Apache License version 2.0](https://github.com/OctopusDeploy/Library/blob/master/LICENSE.txt).

[Report an issue](https://github.com/OctopusDeploy/Library/issues/new?assignees=&labels=&projects=&template=bug-report.yml&title=Issue%20with%20Google%20Chat%20-%20Send%20message&step-template=Google%20Chat%20-%20Send%20message)

<div class="get-json">

To use this template in Octopus Deploy, copy the JSON below and paste it into the **Library → Step templates → Import** dialog.

```json
{
  "Id": "6c4c6253-45de-404f-b725-c96e1d7e4958",
  "Name": "Google Chat - Send message",
  "Description": "Send a message to a [Google Chat](https://chat.google.com) space using a configured [chat webhook](https://developers.google.com/workspace/chat/quickstart/webhooks#python_2).\n\nMulti-line message content and [basic formatting](https://developers.google.com/workspace/chat/format-messages) are supported.\n\n**Note:** This script is written in python, and is required for this step to function correctly.",
  "Version": 1,
  "ExportedAt": "2024-04-03T13:02:57.192Z",
  "ActionType": "Octopus.Script",
  "Author": "harrisonmeister",
  "Packages": [],
  "Parameters": [
    {
      "Id": "bb5767eb-bbfb-4379-917e-31f73cf56ad2",
      "Name": "GoogleChat.SendMessage.WebhookUrl",
      "Label": "Webhook URL",
      "HelpText": "Provide the Google Chat [Webhook URL](https://developers.google.com/workspace/chat/quickstart/webhooks)",
      "DefaultValue": "",
      "DisplaySettings": {
        "Octopus.ControlType": "Sensitive"
      }
    },
    {
      "Id": "cb6577d7-d160-4e3a-86ea-b536bf92133a",
      "Name": "GoogleChat.SendMessage.MessageContent",
      "Label": "Message Content",
      "HelpText": "Provide the message to send. Multi-line values, and [basic formatting](https://developers.google.com/workspace/chat/format-messages) are supported.",
      "DefaultValue": "",
      "DisplaySettings": {
        "Octopus.ControlType": "MultiLineText"
      }
    }
  ],
  "Properties": {
    "Octopus.Action.Script.ScriptSource": "Inline",
    "Octopus.Action.Script.Syntax": "Python",
    "Octopus.Action.Script.ScriptBody": "import subprocess\nimport sys\n\nsubprocess.check_call([sys.executable, '-m', 'pip', 'install', 'httplib2', '--disable-pip-version-check'])\n\n# parameters\nwebhook_url = get_octopusvariable(\"GoogleChat.SendMessage.WebhookUrl\")\nmessage_content = get_octopusvariable(\"GoogleChat.SendMessage.MessageContent\")\n\nif not webhook_url:\n  raise ValueError('Webhook url null or empty!')\n  \nif not message_content:\n  raise ValueError('Message content null or empty!')\n  \nfrom json import dumps\nfrom httplib2 import Http\n\napp_message = {\"text\": message_content}\nmessage_headers = {\"Content-Type\": \"application/json; charset=UTF-8\"}\nhttp_obj = Http()\nresponse = http_obj.request(\n  uri=webhook_url,\n  method=\"POST\",\n  headers=message_headers,\n  body=dumps(app_message),\n)\nprintverbose('Google response:')\nprintverbose(response)"
  },
  "Category": "Google Chat",
  "HistoryUrl": "https://github.com/OctopusDeploy/Library/commits/master/step-templates//opt/buildagent/work/75443764cd38076d/step-templates/google-chat-send-message.json",
  "Website": "/step-templates/6c4c6253-45de-404f-b725-c96e1d7e4958",
  "Logo": "https://i.octopus.com/library/step-templates/google-chat.png",
  "$Meta": {
    "Type": "ActionTemplate"
  }
}
```

[History](https://github.com/OctopusDeploy/Library/commits/master/step-templates/https://github.com/OctopusDeploy/Library/commits/master/step-templates//opt/buildagent/work/75443764cd38076d/step-templates/google-chat-send-message.json)

</div>
