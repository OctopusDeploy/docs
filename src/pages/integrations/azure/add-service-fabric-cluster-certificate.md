---
# This file is auto-generated by docs/tools/MarkdownGenerator (detail.js)
layout: src/layouts/Default.astro
pubDate: 2018-05-02
title: 'Add Service Fabric Cluster Certificate'
description: 'Add a secondary cluster certificate to a service fabric cluster using an existing azure key vault certificate.'
navMenu: false
# Set to true when launched
navSitemap: false
navSearch: false
---

Octopus.AzurePowerShell exported 2018-05-02 by prebenh belongs to 'Azure' category.

## Parameters

When steps based on the template are included in a project's deployment process, the parameters below can be set.


<div class="param">

### Azure account

`Azure.AddServiceFabricClusterCertificate.Account = `

null

</div>
        
<div class="param">

### Resource group name

`Azure.AddServiceFabricClusterCertificate.ResourceGroupName = `

The azure resource group name where the service fabric cluster is located

</div>
        
<div class="param">

### Service fabric cluster name

`Azure.AddServiceFabricClusterCertificate.ClusterName = `

The name of the service fabric cluster

</div>
        
<div class="param">

### Secret identifier

`Azure.AddServiceFabricClusterCertificate.SecretIdentifier = `

The secret identifier of the Azure Key Value certificate.
Example
> https://{key vault name}.vault.azure.net/secrets/{certificate name}/{identifier}

</div>
        
<div class="param">

### Azure Storage Account Name

`storageAccountName`

Name of the account that the files and folders will be uploaded to.

</div>
        
<div class="param">

### Azure Storage Account Key

`storageAccountKey`

The key that is used to log into the account.

</div>
        
<div class="param">

### Azure Container Name

`containerName`

The name of the container the files and folder will be uploaded to.

</div>
        
<div class="param">

### Name of the Parent Folder

`localFolder`

Name of the Parent Folder being uploaded

</div>
        
<div class="param">

### Recursive

`doRecurse = True`

null

</div>
        
<div class="param">

### Force

`doForce = False`

Override is enabled or not

</div>
        

## Script body

Steps based on this template will execute the following *undefined* script.

```text
Write-Output "Adding Service fabric cluster certificate"
Write-Output "Resource group name: " $OctopusParameters["Azure.AddServiceFabricClusterCertificate.ResourceGroupName"]
Write-Output "Service fabric cluster name:" $OctopusParameters["Azure.AddServiceFabricClusterCertificate.ClusterName"]
Write-Output "Certificate secret identifier:" $OctopusParameters["Azure.AddServiceFabricClusterCertificate.SecretIdentifier"]

Add-AzureRmServiceFabricClusterCertificate -ResourceGroupName $OctopusParameters["Azure.AddServiceFabricClusterCertificate.ResourceGroupName"] `
	-Name $OctopusParameters["Azure.AddServiceFabricClusterCertificate.ClusterName"] `
    -SecretIdentifier $OctopusParameters["Azure.AddServiceFabricClusterCertificate.SecretIdentifier"]
```

Provided under the [Apache License version 2.0](https://github.com/OctopusDeploy/Library/blob/master/LICENSE.txt).

[Report an issue](https://github.com/OctopusDeploy/Library/issues/new?assignees=&labels=&projects=&template=bug-report.yml&title=Issue%20with%20Add%20Service%20Fabric%20Cluster%20Certificate&step-template=Add%20Service%20Fabric%20Cluster%20Certificate)

<div class="get-json">

To use this template in Octopus Deploy, copy the JSON below and paste it into the **Library → Step templates → Import** dialog.

```json
{
  "Id": "cf3fb207-05d7-4818-8c09-d2484eadc96c",
  "Name": "Add Service Fabric Cluster Certificate",
  "Description": "Add a secondary cluster certificate to a service fabric cluster using an existing azure key vault certificate.",
  "Version": 0,
  "ExportedAt": "2018-05-02T11:51:09.599Z",
  "ActionType": "Octopus.AzurePowerShell",
  "Author": "prebenh",
  "Parameters": [
    {
      "Id": "14ec432f-4d26-4341-8c06-5b89cfb20a6c",
      "Name": "Azure.AddServiceFabricClusterCertificate.Account",
      "Label": "Azure account",
      "HelpText": null,
      "DefaultValue": "",
      "DisplaySettings": {
        "Octopus.ControlType": "AzureAccount"
      },
      "Links": {}
    },
    {
      "Id": "dc0b28c9-40b8-4897-be2a-a48fbbbec685",
      "Name": "Azure.AddServiceFabricClusterCertificate.ResourceGroupName",
      "Label": "Resource group name",
      "HelpText": "The azure resource group name where the service fabric cluster is located",
      "DefaultValue": "",
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      },
      "Links": {}
    },
    {
      "Id": "7436632f-210f-4cec-8639-c93164a6240f",
      "Name": "Azure.AddServiceFabricClusterCertificate.ClusterName",
      "Label": "Service fabric cluster name",
      "HelpText": "The name of the service fabric cluster",
      "DefaultValue": "",
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      },
      "Links": {}
    },
    {
      "Id": "7ee8a384-bab3-4714-af79-dcfbd3bd602f",
      "Name": "Azure.AddServiceFabricClusterCertificate.SecretIdentifier",
      "Label": "Secret identifier",
      "HelpText": "The secret identifier of the Azure Key Value certificate.\nExample\n> https://{key vault name}.vault.azure.net/secrets/{certificate name}/{identifier}",
      "DefaultValue": "",
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      },
      "Links": {}
    },
    {
      "Id": "4cb76611-ff29-4256-9475-3769fd890e0f",
      "Name": "storageAccountName",
      "Label": "Azure Storage Account Name",
      "HelpText": "Name of the account that the files and folders will be uploaded to.",
      "DefaultValue": null,
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      }
    },
    {
      "Id": "cc0eb63d-4545-4d9d-aca3-7844e1e0a54e",
      "Name": "storageAccountKey",
      "Label": "Azure Storage Account Key",
      "HelpText": "The key that is used to log into the account.",
      "DefaultValue": null,
      "DisplaySettings": {
        "Octopus.ControlType": "Sensitive"
      }
    },
    {
      "Id": "8245c4b0-014d-467c-a95d-ab6aac230075",
      "Name": "containerName",
      "Label": "Azure Container Name",
      "HelpText": "The name of the container the files and folder will be uploaded to.",
      "DefaultValue": null,
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      }
    },
    {
      "Id": "45f6df33-d04d-44bd-8a26-1ab45c634afc",
      "Name": "localFolder",
      "Label": "Name of the Parent Folder",
      "HelpText": "Name of the Parent Folder being uploaded",
      "DefaultValue": null,
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      }
    },
    {
      "Id": "8c559f0f-2d6e-4202-8614-65cabb29e643",
      "Name": "doRecurse",
      "Label": "Recursive",
      "HelpText": null,
      "DefaultValue": "True",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Id": "8a06615b-69a2-4d32-be29-981b6c5725fc",
      "Name": "doForce",
      "Label": "Force",
      "HelpText": "Override is enabled or not",
      "DefaultValue": "False",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    }
  ],
  "Properties": {
    "Octopus.Action.Script.ScriptSource": "Inline",
    "Octopus.Action.Azure.AccountId": "#{Azure.AddServiceFabricClusterCertificate.Account}",
    "Octopus.Action.Script.ScriptBody": "Write-Output \"Adding Service fabric cluster certificate\"\nWrite-Output \"Resource group name: \" $OctopusParameters[\"Azure.AddServiceFabricClusterCertificate.ResourceGroupName\"]\nWrite-Output \"Service fabric cluster name:\" $OctopusParameters[\"Azure.AddServiceFabricClusterCertificate.ClusterName\"]\nWrite-Output \"Certificate secret identifier:\" $OctopusParameters[\"Azure.AddServiceFabricClusterCertificate.SecretIdentifier\"]\n\nAdd-AzureRmServiceFabricClusterCertificate -ResourceGroupName $OctopusParameters[\"Azure.AddServiceFabricClusterCertificate.ResourceGroupName\"] `\n\t-Name $OctopusParameters[\"Azure.AddServiceFabricClusterCertificate.ClusterName\"] `\n    -SecretIdentifier $OctopusParameters[\"Azure.AddServiceFabricClusterCertificate.SecretIdentifier\"]"
  },
  "Category": "Azure",
  "HistoryUrl": "https://github.com/OctopusDeploy/Library/commits/master/step-templates//opt/buildagent/work/75443764cd38076d/step-templates/azure-add-service-fabric-cluster-certificate.json",
  "Website": "/step-templates/cf3fb207-05d7-4818-8c09-d2484eadc96c",
  "Logo": "https://i.octopus.com/library/step-templates/azure.png",
  "$Meta": {
    "Type": "ActionTemplate"
  }
}
```

[History](https://github.com/OctopusDeploy/Library/commits/master/step-templates/https://github.com/OctopusDeploy/Library/commits/master/step-templates//opt/buildagent/work/75443764cd38076d/step-templates/azure-add-service-fabric-cluster-certificate.json)

</div>
