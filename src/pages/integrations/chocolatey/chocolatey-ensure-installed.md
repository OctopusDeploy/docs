---
layout: src/layouts/Default.astro
pubDate: 2020-07-28
title: 'Chocolatey - Ensure Installed'
description: 'Ensures that the Chocolatey package manager is installed on the system. The installer is downloaded from https://chocolatey.org if required.'
# This file is auto-generated by docs/tools/MarkdownGenerator (detail.js)
---

Octopus.Script exported 2020-07-28 by pauby belongs to 'Chocolatey' category.

## Parameters

When steps based on the template are included in a project's deployment process, the parameters below can be set.



## Script body

Steps based on this template will execute the following *PowerShell* script.

```PowerShell
[Net.ServicePointManager]::SecurityProtocol = [Net.ServicePointManager]::SecurityProtocol -bor [Net.SecurityProtocolType]::Tls12
Write-Output "Ensuring the Chocolatey package manager is installed..."

$chocolateyBin = [Environment]::GetEnvironmentVariable("ChocolateyInstall", "Machine") + "\bin"
$chocInstalled = Test-Path "$chocolateyBin\choco.exe"

if (-not $chocInstalled) {
    Write-Output "Chocolatey not found, installing..."
    
    $installPs1 = ((new-object net.webclient).DownloadString('https://chocolatey.org/install.ps1'))
    Invoke-Expression $installPs1
    
    Write-Output "Chocolatey installation complete."
} else {
    Write-Output "Chocolatey was found at $chocolateyBin and won't be reinstalled."
}

```

Provided under the [Apache License version 2.0](https://github.com/OctopusDeploy/Library/blob/master/LICENSE.txt).

[Report an issue](https://github.com/OctopusDeploy/Library/issues/new?assignees=&labels=&projects=&template=bug-report.yml&title=Issue%20with%20Chocolatey%20-%20Ensure%20Installed&step-template=Chocolatey%20-%20Ensure%20Installed)

<div class="get-json">

To use this template in Octopus Deploy, copy the JSON below and paste it into the **Library → Step templates → Import** dialog.

```json
{
  "Id": "c364b0a5-a0b7-48f8-a1a4-35e9f54a82d3",
  "Name": "Chocolatey - Ensure Installed",
  "Description": "Ensures that the Chocolatey package manager is installed on the system. The installer is downloaded from https://chocolatey.org if required.",
  "Version": 7,
  "ExportedAt": "2020-07-28T13:42:22.284+00:00",
  "ActionType": "Octopus.Script",
  "Author": "pauby",
  "Parameters": [],
  "Properties": {
    "Octopus.Action.Script.ScriptBody": "[Net.ServicePointManager]::SecurityProtocol = [Net.ServicePointManager]::SecurityProtocol -bor [Net.SecurityProtocolType]::Tls12\nWrite-Output \"Ensuring the Chocolatey package manager is installed...\"\n\n$chocolateyBin = [Environment]::GetEnvironmentVariable(\"ChocolateyInstall\", \"Machine\") + \"\\bin\"\n$chocInstalled = Test-Path \"$chocolateyBin\\choco.exe\"\n\nif (-not $chocInstalled) {\n    Write-Output \"Chocolatey not found, installing...\"\n    \n    $installPs1 = ((new-object net.webclient).DownloadString('https://chocolatey.org/install.ps1'))\n    Invoke-Expression $installPs1\n    \n    Write-Output \"Chocolatey installation complete.\"\n} else {\n    Write-Output \"Chocolatey was found at $chocolateyBin and won't be reinstalled.\"\n}\n",
    "Octopus.Action.Script.Syntax": "PowerShell"
  },
  "Category": "Chocolatey",
  "HistoryUrl": "https://github.com/OctopusDeploy/Library/commits/master/step-templates//opt/buildagent/work/75443764cd38076d/step-templates/chocolatey-ensure-installed.json",
  "Website": "/step-templates/c364b0a5-a0b7-48f8-a1a4-35e9f54a82d3",
  "Logo": "https://i.octopus.com/library/step-templates/chocolatey.png",
  "$Meta": {
    "Type": "ActionTemplate"
  }
}
```

[History](https://github.com/OctopusDeploy/Library/commits/master/step-templates/https://github.com/OctopusDeploy/Library/commits/master/step-templates//opt/buildagent/work/75443764cd38076d/step-templates/chocolatey-ensure-installed.json)

</div>
