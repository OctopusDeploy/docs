---
layout: src/layouts/Default.astro
pubDate: 2016-09-15
title: >-
    Wait until time
description: >-
    Pauses the process until a given time
navMenu: false
# Set to true when launched
navSitemap: false
navSearch: false
# This file is auto-generated by docs/tools/MarkdownGenerator (detail.js)
---

Octopus.Script exported 2016-09-15 by PeterOsterdahl belongs to 'Wait' category.

## Parameters

When steps based on the template are included in a project's deployment process, the parameters below can be set.


<div class="param">

### Time to deploy

`DefaultTargetTime = `

Will deploy within the next 24 hours if only time is specified or at a specific date if that is specified
A time set here will be used unless the project has a variable TargetTime.
Examples:

	03:00				Will deploy within 24 hours when the time is 03:00 in the morning
	2099-09-14 05:00	Will deploy at that day and time
	2025-10-01			Will deploy at 00:00 the first of october 2025

If the deployment time changes often it is suggested to create a variable named TargetTime and make it promptable. This will force the user to set the deployment time before the build process starts.

</div>
        

## Script body

Steps based on this template will execute the following *PowerShell* script.

```powershell
if(($DefaultTargetTime -eq $null-or $DefaultTargetTime -eq '') -and ($TargetTime -eq $null -or $TargetTime -eq'') ){
    Write-Output 'Deploy will start immediately because neither TargetTime or DefaultTargetTime is set' 
}else{
    
    if($TargetTime -eq $null){
        $deployTime = get-date($DefaultTargetTime)
        Write-Output 'DeployTime is set to DefaultTargetTime since TargetTime is not configured as a variable for this build scope.'
    }else{
        $deployTime = get-date($TargetTime)
    }
    if((get-date)  -ge $deployTime){
        $deployTime = $deployTime.AddDays(1)
    }
    Write-Output ('Deploy will pause until ' + $deployTime)

    
    do {
    	Start-Sleep 1
    }
    until ((get-date) -ge $deployTime)
}
```

Provided under the [Apache License version 2.0](https://github.com/OctopusDeploy/Library/blob/master/LICENSE.txt).

[Report an issue](https://github.com/OctopusDeploy/Library/issues/new?assignees=&labels=&projects=&template=bug-report.yml&title=Issue%20with%20Wait%20until%20time&step-template=Wait%20until%20time)

<div class="get-json">

To use this template in Octopus Deploy, copy the JSON below and paste it into the **Library → Step templates → Import** dialog.

```json
{
  "Id": "c8781255-615a-4092-99f1-82ddefdb6d6b",
  "Name": "Wait until time",
  "Description": "Pauses the process until a given time",
  "Version": 25,
  "ExportedAt": "2016-09-15T10:46:20.183+00:00",
  "ActionType": "Octopus.Script",
  "Author": "PeterOsterdahl",
  "Parameters": [
    {
      "Name": "DefaultTargetTime",
      "Label": "Time to deploy",
      "HelpText": "Will deploy within the next 24 hours if only time is specified or at a specific date if that is specified\nA time set here will be used unless the project has a variable TargetTime.\nExamples:\n\n\t03:00\t\t\t\tWill deploy within 24 hours when the time is 03:00 in the morning\n\t2099-09-14 05:00\tWill deploy at that day and time\n\t2025-10-01\t\t\tWill deploy at 00:00 the first of october 2025\n\nIf the deployment time changes often it is suggested to create a variable named TargetTime and make it promptable. This will force the user to set the deployment time before the build process starts.",
      "DefaultValue": "",
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      }
    }
  ],
  "Properties": {
    "Octopus.Action.Script.ScriptBody": "if(($DefaultTargetTime -eq $null-or $DefaultTargetTime -eq '') -and ($TargetTime -eq $null -or $TargetTime -eq'') ){\n    Write-Output 'Deploy will start immediately because neither TargetTime or DefaultTargetTime is set' \n}else{\n    \n    if($TargetTime -eq $null){\n        $deployTime = get-date($DefaultTargetTime)\n        Write-Output 'DeployTime is set to DefaultTargetTime since TargetTime is not configured as a variable for this build scope.'\n    }else{\n        $deployTime = get-date($TargetTime)\n    }\n    if((get-date)  -ge $deployTime){\n        $deployTime = $deployTime.AddDays(1)\n    }\n    Write-Output ('Deploy will pause until ' + $deployTime)\n\n    \n    do {\n    \tStart-Sleep 1\n    }\n    until ((get-date) -ge $deployTime)\n}",
    "Octopus.Action.Script.Syntax": "PowerShell"
  },
  "Category": "Wait",
  "HistoryUrl": "https://github.com/OctopusDeploy/Library/commits/master/step-templates//opt/buildagent/work/75443764cd38076d/step-templates/Wait-until-time.json",
  "Website": "/step-templates/c8781255-615a-4092-99f1-82ddefdb6d6b",
  "Logo": "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",
  "$Meta": {
    "Type": "ActionTemplate"
  }
}
```

[History](https://github.com/OctopusDeploy/Library/commits/master/step-templates/https://github.com/OctopusDeploy/Library/commits/master/step-templates//opt/buildagent/work/75443764cd38076d/step-templates/Wait-until-time.json)

</div>
