---
layout: src/layouts/Default.astro
pubDate: 2015-08-03
title: 'XML update'
description: 'null'
navMenu: false
# Set to true when launched
navSitemap: false
navSearch: false
# This file is auto-generated by docs/tools/MarkdownGenerator (detail.js)
---

Octopus.Script exported 2015-08-03 by pitrew belongs to 'XML' category.

## Parameters

When steps based on the template are included in a project's deployment process, the parameters below can be set.


<div class="param">

### XML file path

`path`

null

</div>
        
<div class="param">

### XPath

`xmlPath`

XPath element with namespace //b:setting

</div>
        
<div class="param">

### Key

`key`

Key to change

</div>
        
<div class="param">

### Value

`value`

New value

</div>
        
<div class="param">

### NS key

`nsKey = B`

Namespace key

</div>
        
<div class="param">

### NS Value

`nsValue`

Namespace value

</div>
        

## Script body

Steps based on this template will execute the following *PowerShell* script.

```powershell
[xml]$xml = Get-Content $path 
$ns = new-object Xml.XmlNamespaceManager $xml.NameTable
$ns.AddNamespace($nsKey, $nsValue)

$xml.SelectNodes($xmlPath, $ns) | % {
	if ($_.key -eq $key)
	{
		$_.value = $value
	}
}

$xml.Save($path)
```

Provided under the [Apache License version 2.0](https://github.com/OctopusDeploy/Library/blob/master/LICENSE.txt).

[Report an issue](https://github.com/OctopusDeploy/Library/issues/new?assignees=&labels=&projects=&template=bug-report.yml&title=Issue%20with%20XML%20update&step-template=XML%20update)

<div class="get-json">

To use this template in Octopus Deploy, copy the JSON below and paste it into the **Library → Step templates → Import** dialog.

```json
{
  "Id": "170a9b93-96f2-470b-81ca-e0ff53fa7c3d",
  "Name": "XML update",
  "Description": null,
  "Version": 0,
  "ExportedAt": "2015-08-03T13:50:55.041+00:00",
  "ActionType": "Octopus.Script",
  "Author": "pitrew",
  "Parameters": [
    {
      "Name": "path",
      "Label": "XML file path",
      "HelpText": null,
      "DefaultValue": null,
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      }
    },
    {
      "Name": "xmlPath",
      "Label": "XPath",
      "HelpText": "XPath element with namespace //b:setting",
      "DefaultValue": null,
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      }
    },
    {
      "Name": "key",
      "Label": "Key",
      "HelpText": "Key to change",
      "DefaultValue": null,
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      }
    },
    {
      "Name": "value",
      "Label": "Value",
      "HelpText": "New value",
      "DefaultValue": null,
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      }
    },
    {
      "Name": "nsKey",
      "Label": "NS key",
      "HelpText": "Namespace key",
      "DefaultValue": "B",
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      }
    },
    {
      "Name": "nsValue",
      "Label": "NS Value",
      "HelpText": "Namespace value",
      "DefaultValue": null,
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      }
    }
  ],
  "Properties": {
    "Octopus.Action.Script.ScriptBody": "[xml]$xml = Get-Content $path \n$ns = new-object Xml.XmlNamespaceManager $xml.NameTable\n$ns.AddNamespace($nsKey, $nsValue)\n\n$xml.SelectNodes($xmlPath, $ns) | % {\n\tif ($_.key -eq $key)\n\t{\n\t\t$_.value = $value\n\t}\n}\n\n$xml.Save($path)",
    "Octopus.Action.Script.Syntax": "PowerShell"
  },
  "Category": "XML",
  "HistoryUrl": "https://github.com/OctopusDeploy/Library/commits/master/step-templates//opt/buildagent/work/75443764cd38076d/step-templates/xml-attribute-update.json",
  "Website": "/step-templates/170a9b93-96f2-470b-81ca-e0ff53fa7c3d",
  "Logo": "https://i.octopus.com/library/step-templates/xml.png",
  "$Meta": {
    "Type": "ActionTemplate"
  }
}
```

[History](https://github.com/OctopusDeploy/Library/commits/master/step-templates/https://github.com/OctopusDeploy/Library/commits/master/step-templates//opt/buildagent/work/75443764cd38076d/step-templates/xml-attribute-update.json)

</div>
